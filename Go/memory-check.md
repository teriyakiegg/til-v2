# memory check
メモリ使用量調べたかったら以下で分かる
```
var mem runtime.MemStats
runtime.ReadMemStats(&mem)
```

```
TotalAlloc: アロケート済みのヒープオブジェクトのバイト数(解放された数も含む)
Alloc、HeapAlloc: アロケートされ、使用中のバイト数
StackInuse: スタックスパン内のバイト
HeapSys: システムから取得したヒープオブジェクトのバイト数(未使用なものも含む)
HeapIdle: アイドル (未使用) スパンのバイト数
HeapIdle から HeapReleased を引いた値は， OS に返される可能性があるメモリの量を見積もりますが，ランタイムによって保持されているため， OS からさらにメモリをリクエストせずにヒープを増やすことができます。
この差がヒープサイズよりもかなり大きい場合は，ライブヒープサイズに最近の一時的な急上昇があったことを示しています。
HeapReleased: OS に返され，まだヒープ用に再取得されていないアイドルスパンからのヒープメモリをカウント
Sys: OS から取得したメモリの総バイト数
Sys は， Go ランタイムによってヒープ，スタック，その他の内部データ構造用に予約されている仮想アドレス空間を測定します。
```

http://imagawa.hatenadiary.jp/entry/2016/12/22/190000

http://golang.jp/pkg/runtime


## 考察
大量データを扱う時、データ量の増加に伴ってメモリ使用量がどれくらい推移するかを概算するのに、  
どの項目を参考すると良さそうかを考えると、  
とりあえずOSから取得したメモリの総バイト数であるSysとその中でIdleな分はどんなもんかぐらいを見ておけば良い気がする