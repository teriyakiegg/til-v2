# ssg
『Next.js 4年目の知見：SSRはもう古い、VercelにAPIサーバを置くな』  
https://qiita.com/jagaapple/items/faf125e28f8c2860269c

Next.jsの記事だが、SSGについて理解が深まった。  
考えると当たり前だが、認証が必要なページはSSG無理
```
また「認証が必要なページのSSGはどうするの？」と疑問に思うかもしれません。 
getStaticProps から返すPropsに決め打ちでユーザIDなどを入力することは要件上できませんし、
そのライフサイクル内でCookieを参照することもできません。
すなわち、認証が必要なページのSSGはできないわけです。
逆に、認証が必要なページのSSGは不要と言えるでしょう。
その代わり getStaticProps などを用いないStatic Build─認証処理はWebブラウザでオンデマンドに処理して、
事前ビルド時にはコンポーネント構造だけをHTML化する─という方法があります。Next.jsにおける、従来のSSGです。

そもそも認証が必要なページには秘匿情報が含まれていますから、SEOさせる必要がありません。
秘匿情報をHTMLに埋め込まなければ、検索エンジンのクローラに収集されることもありませんし、
CDNによる個人情報のキャッシュミスなども起こりません。
コンテンツが埋め込まれていない状態でのコンポーネントの静的ビルドは済んでいますから、First Viewパフォーマンスに対する影響も大きくないはずです。
```